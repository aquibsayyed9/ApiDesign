2021-02-10 17:39:37.3671|DEBUG|EzPayService.Program|init main function
2021-02-10 17:45:52.3335|INFO|EzPayService.Controllers.ChargeTypeController|Inside GetChargeTypes
2021-02-10 17:47:14.1477|INFO|EzPay.Business.Classes.PaymentBusiness|Log the data by serialzing json
2021-02-10 17:47:14.1506|INFO|EzPay.Business.Classes.PaymentBusiness|Serialized and logged data, Creating Payment Gateway DTO object using Company ID: 7, Charge Type ID: 2, Tower ID: 1
2021-02-10 17:47:14.1506|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully created Payment Gateway DTO object, Calling Method: GetPaymentGatewayDetails
2021-02-10 17:47:14.1506|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 17:47:14.4342|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 17:47:40.2061|INFO|EzPay.Business.Classes.PaymentBusiness|dbPaymentGatewayDTO is not null, updating properties of paymentTransactionsDTO
2021-02-10 17:48:00.9441|INFO|EzPay.Business.Classes.PaymentBusiness|Properties have been updated, Switching on PG Type
2021-02-10 17:48:03.3977|INFO|EzPay.Business.Classes.PaymentBusiness|PG Type is Com Trust, Calling Method: GetComTrustResponse
2021-02-10 17:48:04.0515|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 17:48:04.0686|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 17:48:04.0795|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration Created, exiting method
2021-02-10 17:48:04.3891|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Request JSON: {"Registration":{"Currency":"AED","ReturnPath":"ComTrustReturnPath","TransactionHint":"CPT:Y;VCC:Y;","OrderID":"a63efa1c-bc00-4518-b8cb-8c74b673722a","Store":"Seashore Villas","Terminal":"Seashore Villas","Channel":"Web","Amount":"5513.44","Customer":null,"OrderName":"PayBill","UserName":null,"Password":null}}
2021-02-10 17:48:04.3891|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Model, calling method: GetComTrustTransactionDetails to get transaction id from Com Trust
2021-02-10 17:48:04.5406|INFO|EzPay.Business.Classes.ComTrustBusiness|Preparing json data to call Com Trust Service
2021-02-10 17:48:04.5406|INFO|EzPay.Business.Classes.ComTrustBusiness|Request Serialized To Json, Preparing Content
2021-02-10 17:48:04.6498|INFO|EzPay.Business.Classes.ComTrustBusiness|Data Prepared, Calling Service
2021-02-10 17:48:06.5169|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration successfull with response: {"Transaction":{"ResponseCode":"5001","ResponseClass":"7","ResponseDescription":"Neither certificate nor password was provided","ResponseClassDescription":"Request is invalid","Balance":{"Value":"0"},"Amount":{"Value":"0"},"Fees":{"Value":"0"},"Payer":null,"UniqueID":"71f3d0d8-ba12-4d14-afa7-6661d861f446"}} 
 De-Serializing to get Response
2021-02-10 17:48:26.1641|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Transaction Data with Transaction ID: , Updating paymentTransactionsDTO properties
2021-02-10 17:51:31.6969|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 17:51:32.0046|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 17:51:43.1400|INFO|EzPay.Business.Classes.PaymentBusiness|dbPaymentGatewayDTO is not null, updating properties of paymentTransactionsDTO
2021-02-10 17:51:43.1400|INFO|EzPay.Business.Classes.PaymentBusiness|Properties have been updated, Switching on PG Type
2021-02-10 17:51:43.1400|INFO|EzPay.Business.Classes.PaymentBusiness|PG Type is Com Trust, Calling Method: GetComTrustResponse
2021-02-10 17:51:43.1400|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 17:51:43.1400|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 17:51:43.1400|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration Created, exiting method
2021-02-10 17:51:43.1400|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Request JSON: {"Registration":{"Currency":"AED","ReturnPath":"ComTrustReturnPath","TransactionHint":"CPT:Y;VCC:Y;","OrderID":"7ab3fd7d-fbfc-4c4c-9376-7707a8e8f4e9","Store":"Seashore Villas","Terminal":"Seashore Villas","Channel":"Web","Amount":"5513.44","Customer":null,"OrderName":"PayBill","UserName":null,"Password":null}}
2021-02-10 17:51:43.1494|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Model, calling method: GetComTrustTransactionDetails to get transaction id from Com Trust
2021-02-10 17:51:43.1494|INFO|EzPay.Business.Classes.ComTrustBusiness|Preparing json data to call Com Trust Service
2021-02-10 17:51:43.1494|INFO|EzPay.Business.Classes.ComTrustBusiness|Request Serialized To Json, Preparing Content
2021-02-10 17:51:43.1494|INFO|EzPay.Business.Classes.ComTrustBusiness|Data Prepared, Calling Service
2021-02-10 17:51:43.4592|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration successfull with response: {"Transaction":{"ResponseCode":"5001","ResponseClass":"7","ResponseDescription":"Neither certificate nor password was provided","ResponseClassDescription":"Request is invalid","Balance":{"Value":"0"},"Amount":{"Value":"0"},"Fees":{"Value":"0"},"Payer":null,"UniqueID":"472a8edc-e55d-453e-9597-2f78d114b24b"}} 
 De-Serializing to get Response
2021-02-10 17:51:43.4606|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Transaction Data with Transaction ID: , Updating paymentTransactionsDTO properties
2021-02-10 17:51:43.4606|INFO|EzPay.Business.Classes.PaymentBusiness|Updated Properties, Calling Method: SavePaymentTransaction to Save Payment Transaction for Customer Name: Maged Saad Shoukry Girgis with Email ID: magedshoukry@hotmail.com
2021-02-10 17:51:43.4606|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Mapping DTO to Entity & Saving Payment Transaction In DB
2021-02-10 17:51:45.4082|ERROR|EzPay.DataAccess.Classes.PaymentDataAccess|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'EzzPayDev.dbo.PaymentTransactions', column 'PGDetails'. Truncated value: 'Seashore Villas:Seas'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:6b6ec026-0b3e-4452-b1ec-fed8d2424b67
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at EzPay.EFCore.GenericRepository`1.Save() in F:\Workspace\EzPay\MS\EzPay.EFCore\GenericRepository.cs:line 68
   at EzPay.DataAccess.Classes.PaymentDataAccess.SavePaymentTransaction(PaymentTransactionsDTO payTransaction) in F:\Workspace\EzPay\MS\EzPay.DataAccess\Classes\PaymentDataAccess.cs:line 110
2021-02-10 17:51:45.8399|INFO|EzPay.Business.Classes.PaymentBusiness|Unable to save Payment Transaction in DB
2021-02-10 17:51:45.8399|INFO|EzPay.Business.Classes.PaymentBusiness|Unable to generate PG type, returning failure
2021-02-10 17:51:58.0718|INFO|EzPay.Business.Classes.PaymentBusiness|Log the data by serialzing json
2021-02-10 17:51:58.0718|INFO|EzPay.Business.Classes.PaymentBusiness|Serialized and logged data, Creating Payment Gateway DTO object using Company ID: 7, Charge Type ID: 2, Tower ID: 1
2021-02-10 17:51:58.0718|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully created Payment Gateway DTO object, Calling Method: GetPaymentGatewayDetails
2021-02-10 17:51:58.0718|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 17:51:58.2920|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 17:52:07.0023|INFO|EzPay.Business.Classes.PaymentBusiness|dbPaymentGatewayDTO is not null, updating properties of paymentTransactionsDTO
2021-02-10 17:52:08.5167|INFO|EzPay.Business.Classes.PaymentBusiness|Properties have been updated, Switching on PG Type
2021-02-10 17:52:09.3962|INFO|EzPay.Business.Classes.PaymentBusiness|PG Type is Com Trust, Calling Method: GetComTrustResponse
2021-02-10 17:52:13.5108|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 17:52:13.5108|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 17:52:13.5108|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration Created, exiting method
2021-02-10 17:52:13.5108|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Request JSON: {"Registration":{"Currency":"AED","ReturnPath":"ComTrustReturnPath","TransactionHint":"CPT:Y;VCC:Y;","OrderID":"c563eb5e-4b4c-45e3-84aa-af226ed31114","Store":"Seashore Villas","Terminal":"Seashore Villas","Channel":"Web","Amount":"5513.44","Customer":"Eltizam","OrderName":"PayBill","UserName":"Khateeb","Password":"Tamouh@123456789"}}
2021-02-10 17:52:13.5108|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Model, calling method: GetComTrustTransactionDetails to get transaction id from Com Trust
2021-02-10 17:52:13.5230|INFO|EzPay.Business.Classes.ComTrustBusiness|Preparing json data to call Com Trust Service
2021-02-10 17:52:13.5230|INFO|EzPay.Business.Classes.ComTrustBusiness|Request Serialized To Json, Preparing Content
2021-02-10 17:52:13.5230|INFO|EzPay.Business.Classes.ComTrustBusiness|Data Prepared, Calling Service
2021-02-10 17:52:13.9934|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration successfull with response: {"Transaction":{"ResponseCode":"5024","ResponseClass":"7","ResponseDescription":"Error: Store is invalid, No record found in database","ResponseClassDescription":"Request is invalid","Balance":{"Value":"0"},"Amount":{"Value":"0"},"Fees":{"Value":"0"},"Payer":null,"UniqueID":"c8fd1a3a-9394-451f-8506-1290c27326c8"}} 
 De-Serializing to get Response
2021-02-10 17:56:24.7694|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 17:56:24.7694|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 17:56:24.7778|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration Created, exiting method
2021-02-10 17:56:24.7778|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Request JSON: {"Registration":{"Currency":"AED","ReturnPath":"ComTrustReturnPath","TransactionHint":"CPT:Y;VCC:Y;","OrderID":"c563eb5e-4b4c-45e3-84aa-af226ed31114","Store":"Three60 Communities AD","Terminal":"TOWER 2","Channel":"Web","Amount":"5513.44","Customer":"Eltizam","OrderName":"PayBill","UserName":"Khateeb","Password":"Tamouh@123456789"}}
2021-02-10 17:56:24.7778|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Model, calling method: GetComTrustTransactionDetails to get transaction id from Com Trust
2021-02-10 17:56:24.7890|INFO|EzPay.Business.Classes.ComTrustBusiness|Preparing json data to call Com Trust Service
2021-02-10 17:56:24.7890|INFO|EzPay.Business.Classes.ComTrustBusiness|Request Serialized To Json, Preparing Content
2021-02-10 17:56:24.7890|INFO|EzPay.Business.Classes.ComTrustBusiness|Data Prepared, Calling Service
2021-02-10 17:56:25.3049|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration successfull with response: {"Transaction":{"ResponseCode":"6525","ResponseDescription":"ReturnPath Invalid","UniqueID":"6d4e1070-0457-4259-a0ee-ac33e5faae71"}} 
 De-Serializing to get Response
2021-02-10 18:03:43.4874|DEBUG|EzPayService.Program|init main function
2021-02-10 18:07:40.9889|DEBUG|EzPayService.Program|init main function
2021-02-10 18:07:59.8193|INFO|EzPay.Business.Classes.PaymentBusiness|Log the data by serialzing json
2021-02-10 18:07:59.8218|INFO|EzPay.Business.Classes.PaymentBusiness|Serialized and logged data, Creating Payment Gateway DTO object using Company ID: 7, Charge Type ID: 2, Tower ID: 1
2021-02-10 18:07:59.8218|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully created Payment Gateway DTO object, Calling Method: GetPaymentGatewayDetails
2021-02-10 18:07:59.8218|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 18:08:04.2321|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 18:11:44.5268|DEBUG|EzPayService.Program|init main function
2021-02-10 18:12:09.8004|INFO|EzPay.Business.Classes.PaymentBusiness|Log the data by serialzing json
2021-02-10 18:12:09.8054|INFO|EzPay.Business.Classes.PaymentBusiness|Serialized and logged data, Creating Payment Gateway DTO object using Company ID: 7, Charge Type ID: 2, Tower ID: 1
2021-02-10 18:12:09.8054|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully created Payment Gateway DTO object, Calling Method: GetPaymentGatewayDetails
2021-02-10 18:12:09.8230|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 18:12:12.7880|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 18:12:18.6491|INFO|EzPay.Business.Classes.PaymentBusiness|dbPaymentGatewayDTO is not null, updating properties of paymentTransactionsDTO
2021-02-10 18:12:21.2216|INFO|EzPay.Business.Classes.PaymentBusiness|Properties have been updated, Switching on PG Type
2021-02-10 18:13:48.1304|DEBUG|EzPayService.Program|init main function
2021-02-10 18:13:53.6178|INFO|EzPayService.Controllers.BalancesController|Transaction Update Controller Called
2021-02-10 18:14:01.1754|INFO|EzPay.Business.Classes.PaymentBusiness|Log the data by serialzing json
2021-02-10 18:14:01.1754|INFO|EzPay.Business.Classes.PaymentBusiness|Serialized and logged data, Creating Payment Gateway DTO object using Company ID: 7, Charge Type ID: 2, Tower ID: 1
2021-02-10 18:14:01.1799|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully created Payment Gateway DTO object, Calling Method: GetPaymentGatewayDetails
2021-02-10 18:14:01.1799|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 18:14:04.1311|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 18:14:15.2890|INFO|EzPay.Business.Classes.PaymentBusiness|dbPaymentGatewayDTO is not null, updating properties of paymentTransactionsDTO
2021-02-10 18:14:16.4241|INFO|EzPay.Business.Classes.PaymentBusiness|Properties have been updated, Switching on PG Type
2021-02-10 18:14:19.9664|INFO|EzPay.Business.Classes.PaymentBusiness|PG Type is Com Trust, Calling Method: GetComTrustResponse
2021-02-10 18:14:21.1016|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 18:14:21.1016|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 18:14:21.1180|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration Created, exiting method
2021-02-10 18:14:21.2154|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Request JSON: {"Registration":{"Currency":"AED","ReturnPath":"https://localhost:44355/api/Balances/TransactionUpdate","TransactionHint":"CPT:Y;VCC:Y;","OrderID":"45419e98-e02a-4c9b-a1e6-4c74c2cf9b22","Store":"Seashore Villas","Terminal":"Seashore Villas","Channel":"Web","Amount":"5513.44","Customer":"Eltizam","OrderName":"PayBill","UserName":"Khateeb","Password":"Tamouh@123456789"}}
2021-02-10 18:14:21.2154|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Model, calling method: GetComTrustTransactionDetails to get transaction id from Com Trust
2021-02-10 18:14:21.2570|INFO|EzPay.Business.Classes.ComTrustBusiness|Preparing json data to call Com Trust Service
2021-02-10 18:14:21.2582|INFO|EzPay.Business.Classes.ComTrustBusiness|Request Serialized To Json, Preparing Content
2021-02-10 18:14:21.3310|INFO|EzPay.Business.Classes.ComTrustBusiness|Data Prepared, Calling Service
2021-02-10 18:14:22.4684|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration successfull with response: {"Transaction":{"ResponseCode":"5024","ResponseClass":"7","ResponseDescription":"Error: Store is invalid, No record found in database","ResponseClassDescription":"Request is invalid","Balance":{"Value":"0"},"Amount":{"Value":"0"},"Fees":{"Value":"0"},"Payer":null,"UniqueID":"523bb49e-f672-4011-95fd-4e71afae1ded"}} 
 De-Serializing to get Response
2021-02-10 18:14:44.6829|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 18:14:49.6147|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 18:30:20.8929|DEBUG|EzPayService.Program|init main function
2021-02-10 18:30:49.4023|INFO|EzPayService.Controllers.ChargeTypeController|Inside GetChargeTypes
2021-02-10 18:31:18.1054|INFO|EzPay.Business.Classes.PaymentBusiness|Log the data by serialzing json
2021-02-10 18:31:18.1054|INFO|EzPay.Business.Classes.PaymentBusiness|Serialized and logged data, Creating Payment Gateway DTO object using Company ID: 7, Charge Type ID: 2, Tower ID: 1
2021-02-10 18:31:18.1054|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully created Payment Gateway DTO object, Calling Method: GetPaymentGatewayDetails
2021-02-10 18:31:18.1054|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 18:31:18.3594|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 18:31:49.5334|INFO|EzPay.Business.Classes.PaymentBusiness|dbPaymentGatewayDTO is not null, updating properties of paymentTransactionsDTO
2021-02-10 18:31:49.5441|INFO|EzPay.Business.Classes.PaymentBusiness|Properties have been updated, Switching on PG Type
2021-02-10 18:31:49.5441|INFO|EzPay.Business.Classes.PaymentBusiness|PG Type is Com Trust, Calling Method: GetComTrustResponse
2021-02-10 18:31:49.5441|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 18:31:49.5562|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 18:31:49.5562|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration Created, exiting method
2021-02-10 18:31:49.5935|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Request JSON: {"Registration":{"Currency":"AED","ReturnPath":"https://localhost:44355/api/Balances/TransactionUpdate","TransactionHint":"CPT:Y;VCC:Y;","OrderID":"1abf808e-ab44-467c-bc19-1c24fcdb5b3a","Store":"Three60 Communities AD","Terminal":"TOWER 2","Channel":"Web","Amount":"5513.44","Customer":"Eltizam","OrderName":"PayBill","UserName":"Khateeb","Password":"Tamouh@123456789"}}
2021-02-10 18:31:49.5935|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Model, calling method: GetComTrustTransactionDetails to get transaction id from Com Trust
2021-02-10 18:31:49.6396|INFO|EzPay.Business.Classes.ComTrustBusiness|Preparing json data to call Com Trust Service
2021-02-10 18:31:49.6396|INFO|EzPay.Business.Classes.ComTrustBusiness|Request Serialized To Json, Preparing Content
2021-02-10 18:31:49.6396|INFO|EzPay.Business.Classes.ComTrustBusiness|Data Prepared, Calling Service
2021-02-10 18:31:50.3514|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration successfull with response: {"Transaction":{"ResponseCode":"6515","ResponseClass":"5","ResponseDescription":"OrderID length limit is 16 digits","ResponseClassDescription":"Error","Balance":{"Value":"0"},"Amount":{"Value":"0"},"Fees":{"Value":"0"},"Payer":null,"UniqueID":"5b76d0bb-0bf3-47a6-bc8c-f7b8aca89534"}} 
 De-Serializing to get Response
2021-02-10 18:31:50.3930|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Transaction Data with Transaction ID: , Updating paymentTransactionsDTO properties
2021-02-10 18:31:50.3930|INFO|EzPay.Business.Classes.PaymentBusiness|Updated Properties, Calling Method: SavePaymentTransaction to Save Payment Transaction for Customer Name: Maged Saad Shoukry Girgis with Email ID: magedshoukry@hotmail.com
2021-02-10 18:31:50.3930|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Mapping DTO to Entity & Saving Payment Transaction In DB
2021-02-10 18:31:52.5913|ERROR|EzPay.DataAccess.Classes.PaymentDataAccess|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'EzzPayDev.dbo.PaymentTransactions', column 'PGDetails'. Truncated value: 'Three60 Communities '.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:7e7648a6-ebfa-466a-97a3-c2221e6bc9b0
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at EzPay.EFCore.GenericRepository`1.Save() in F:\Workspace\EzPay\MS\EzPay.EFCore\GenericRepository.cs:line 68
   at EzPay.DataAccess.Classes.PaymentDataAccess.SavePaymentTransaction(PaymentTransactionsDTO payTransaction) in F:\Workspace\EzPay\MS\EzPay.DataAccess\Classes\PaymentDataAccess.cs:line 110
2021-02-10 18:31:53.2542|INFO|EzPay.Business.Classes.PaymentBusiness|Unable to save Payment Transaction in DB
2021-02-10 18:31:53.2542|INFO|EzPay.Business.Classes.PaymentBusiness|Unable to generate PG type, returning failure
2021-02-10 18:32:13.2610|INFO|EzPay.Business.Classes.PaymentBusiness|Log the data by serialzing json
2021-02-10 18:32:13.5544|INFO|EzPay.Business.Classes.PaymentBusiness|Serialized and logged data, Creating Payment Gateway DTO object using Company ID: 7, Charge Type ID: 2, Tower ID: 1
2021-02-10 18:32:13.8153|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully created Payment Gateway DTO object, Calling Method: GetPaymentGatewayDetails
2021-02-10 18:32:14.1116|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 18:32:14.3415|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 18:32:22.5791|INFO|EzPay.Business.Classes.PaymentBusiness|dbPaymentGatewayDTO is not null, updating properties of paymentTransactionsDTO
2021-02-10 18:32:44.8308|INFO|EzPay.Business.Classes.PaymentBusiness|Properties have been updated, Switching on PG Type
2021-02-10 18:32:49.5962|INFO|EzPay.Business.Classes.PaymentBusiness|PG Type is Com Trust, Calling Method: GetComTrustResponse
2021-02-10 18:32:50.3187|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 18:32:50.3216|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 18:32:50.3216|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration Created, exiting method
2021-02-10 18:32:50.3216|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Request JSON: {"Registration":{"Currency":"AED","ReturnPath":"https://localhost:44355/api/Balances/TransactionUpdate","TransactionHint":"CPT:Y;VCC:Y;","OrderID":"eeb646d8-67b0-417f-a2ac-8f7e9ac5cf32","Store":"Three60 Communities AD","Terminal":"TOWER 2","Channel":"Web","Amount":"5513.44","Customer":"Eltizam","OrderName":"PayBill","UserName":"Khateeb","Password":"Tamouh@123456789"}}
2021-02-10 18:32:50.3216|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Model, calling method: GetComTrustTransactionDetails to get transaction id from Com Trust
2021-02-10 18:32:50.3216|INFO|EzPay.Business.Classes.ComTrustBusiness|Preparing json data to call Com Trust Service
2021-02-10 18:32:50.3216|INFO|EzPay.Business.Classes.ComTrustBusiness|Request Serialized To Json, Preparing Content
2021-02-10 18:32:50.3216|INFO|EzPay.Business.Classes.ComTrustBusiness|Data Prepared, Calling Service
2021-02-10 18:32:50.9279|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration successfull with response: {"Transaction":{"ResponseCode":"6515","ResponseClass":"5","ResponseDescription":"OrderID length limit is 16 digits","ResponseClassDescription":"Error","Balance":{"Value":"0"},"Amount":{"Value":"0"},"Fees":{"Value":"0"},"Payer":null,"UniqueID":"6950b8b9-6d0a-4a48-90fe-ed3f3ad7afa6"}} 
 De-Serializing to get Response
2021-02-10 18:42:35.3420|DEBUG|EzPayService.Program|init main function
2021-02-10 18:42:57.7914|INFO|EzPay.Business.Classes.PaymentBusiness|Log the data by serialzing json
2021-02-10 18:42:57.7914|INFO|EzPay.Business.Classes.PaymentBusiness|Serialized and logged data, Creating Payment Gateway DTO object using Company ID: 7, Charge Type ID: 2, Tower ID: 1
2021-02-10 18:42:57.7914|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully created Payment Gateway DTO object, Calling Method: GetPaymentGatewayDetails
2021-02-10 18:42:57.8077|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Company ID, ChargeType ID & Tower ID is not null
2021-02-10 18:43:00.0620|INFO|EzPay.DataAccess.Classes.PaymentDataAccess|Got Details, Mapping Entity to DTO and Exiting Method
2021-02-10 18:43:03.1594|INFO|EzPay.Business.Classes.PaymentBusiness|dbPaymentGatewayDTO is not null, updating properties of paymentTransactionsDTO
2021-02-10 18:43:04.2023|INFO|EzPay.Business.Classes.PaymentBusiness|Properties have been updated, Switching on PG Type
2021-02-10 18:43:05.3239|INFO|EzPay.Business.Classes.PaymentBusiness|PG Type is Com Trust, Calling Method: GetComTrustResponse
2021-02-10 18:43:05.8309|INFO|EzPay.Business.Classes.PaymentBusiness|Calling Method: GenerateComTrustModel
2021-02-10 18:43:05.8437|INFO|EzPay.Business.Classes.ComTrustBusiness|Inside Method: GenerateComTrustModel, Creating Com Trust Registration
2021-02-10 18:43:05.8521|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration Created, exiting method
2021-02-10 18:43:05.9080|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Request JSON: {"Registration":{"Currency":"AED","ReturnPath":"https://localhost:44355/api/Balances/TransactionUpdate","TransactionHint":"CPT:Y;VCC:Y;","OrderID":"05b71136-326b-40","Store":"Three60 Communities AD","Terminal":"TOWER 2","Channel":"Web","Amount":"5513.44","Customer":"Eltizam","OrderName":"PayBill","UserName":"Khateeb","Password":"Tamouh@123456789"}}
2021-02-10 18:43:05.9080|INFO|EzPay.Business.Classes.PaymentBusiness|Successfully Generated Com Trust Model, calling method: GetComTrustTransactionDetails to get transaction id from Com Trust
2021-02-10 18:43:05.9217|INFO|EzPay.Business.Classes.ComTrustBusiness|Preparing json data to call Com Trust Service
2021-02-10 18:43:05.9217|INFO|EzPay.Business.Classes.ComTrustBusiness|Request Serialized To Json, Preparing Content
2021-02-10 18:43:05.9335|INFO|EzPay.Business.Classes.ComTrustBusiness|Data Prepared, Calling Service
2021-02-10 18:43:06.9895|INFO|EzPay.Business.Classes.ComTrustBusiness|Com Trust Registration successfull with response: {"Transaction":{"ResponseCode":"5112","ResponseClass":"5","ResponseDescription":"Customer not found","ResponseClassDescription":"Error","Balance":{"Value":"0"},"Amount":{"Value":"0"},"Fees":{"Value":"0"},"Payer":null,"UniqueID":"57f6fb35-dbb3-4d3f-83a1-5b0156290179"}} 
 De-Serializing to get Response
